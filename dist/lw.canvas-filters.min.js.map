{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///lw.canvas-filters.min.js","webpack:///webpack/bootstrap 2684c88467508de7b829","webpack:///./canvas-filters.js","webpack:///../~/floyd-steinberg/floyd-steinberg.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","color","invertColor","data","i","value","brightness","undefined","contrast","gamma","Math","exp","log","grayscale","algorithm","shades","grayscaleAlgorithms","indexOf","Error","gray","r","g","b","max","min","parseInt","canvasFilters","canvas","settings","Object","assign","smoothing","shadesOfGray","dithering","context","getContext","imageSmoothingEnabled","mozImageSmoothingEnabled","webkitImageSmoothingEnabled","msImageSmoothingEnabled","oImageSmoothingEnabled","imageData","getImageData","width","height","contrastFactor","brightnessOffset","gammaCorrection","shadesOfGrayFactor","il","length","_floydSteinberg2","putImageData","defineProperty","_floydSteinberg","floyd_steinberg","image","newPixel","err","imageDataLength","w","lumR","lumG","lumB","floor","currentPixel"],"mappings":"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","file":"lw.canvas-filters.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"CanvasFilter\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"CanvasFilter\"] = factory();\n\telse\n\t\troot[\"CanvasFilter\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"CanvasFilter\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"CanvasFilter\"] = factory();\n\telse\n\t\troot[\"CanvasFilter\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(1);\n\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.canvasFilters = undefined;\n\t\n\tvar _floydSteinberg = __webpack_require__(2);\n\t\n\tvar _floydSteinberg2 = _interopRequireDefault(_floydSteinberg);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t// Grayscale algorithms\n\tvar grayscaleAlgorithms = ['none', 'average', 'desaturation', 'decomposition-min', 'decomposition-max', 'luma', 'luma-601', 'luma-709', 'luma-240', 'red-chanel', 'green-chanel', 'blue-chanel'];\n\t\n\t// Trucate color value in the 0-255 range\n\tfunction color(color) {\n\t    return color < 0 ? 0 : color > 255 ? 255 : color;\n\t}\n\t\n\t// Filters ...\n\tfunction invertColor(data, i, value) {\n\t    if (value) {\n\t        data[i] = color(255 - data[i]);\n\t        data[i + 1] = color(255 - data[i + 1]);\n\t        data[i + 2] = color(255 - data[i + 2]);\n\t    }\n\t}\n\t\n\tfunction brightness(data, i, value) {\n\t    if (value !== undefined) {\n\t        data[i] = color(data[i] + value);\n\t        data[i + 1] = color(data[i + 1] + value);\n\t        data[i + 2] = color(data[i + 2] + value);\n\t    }\n\t}\n\t\n\tfunction contrast(data, i, value) {\n\t    if (value !== undefined) {\n\t        data[i] = color(value * (data[i] - 128) + 128);\n\t        data[i + 1] = color(value * (data[i + 1] - 128) + 128);\n\t        data[i + 2] = color(value * (data[i + 2] - 128) + 128);\n\t    }\n\t}\n\t\n\tfunction gamma(data, i, value) {\n\t    if (value !== undefined) {\n\t        data[i] = color(Math.exp(Math.log(255 * (data[i] / 255)) * value));\n\t        data[i + 1] = color(Math.exp(Math.log(255 * (data[i + 1] / 255)) * value));\n\t        data[i + 2] = color(Math.exp(Math.log(255 * (data[i + 2] / 255)) * value));\n\t    }\n\t}\n\t\n\tfunction grayscale(data, i, algorithm, shades) {\n\t    // Graysale\n\t    // http://www.tannerhelland.com/3643/grayscale-image-algorithm-vb6/\n\t\n\t    // Unsupported algorithm\n\t    if (grayscaleAlgorithms.indexOf(algorithm) === -1) {\n\t        throw new Error('Unsupported grayscale algorithm: ' + algorithm);\n\t    }\n\t\n\t    // None\n\t    if (algorithm === 'none') {\n\t        return null;\n\t    }\n\t\n\t    // Get Red/Green/Blue values\n\t    var gray = void 0;\n\t    var r = data[i];\n\t    var g = data[i + 1];\n\t    var b = data[i + 2];\n\t\n\t    switch (algorithm) {\n\t        case 'average':\n\t            gray = (r + g + b) / 3;\n\t            break;\n\t\n\t        case 'luma':\n\t            // Default\n\t            gray = r * 0.3 + g * 0.59 + b * 0.11;\n\t            break;\n\t\n\t        case 'luma-601':\n\t            // CCIR-601\n\t            gray = r * 0.299 + g * 0.587 + b * 0.114;\n\t            break;\n\t\n\t        case 'luma-709':\n\t            // ITU-R-709\n\t            gray = r * 0.2126 + g * 0.7152 + b * 0.0722;\n\t            break;\n\t\n\t        case 'luma-240':\n\t            // SMPTE-240M\n\t            gray = r * 0.212 + g * 0.701 + b * 0.087;\n\t            break;\n\t\n\t        case 'desaturation':\n\t            gray = (Math.max(r, g, b) + Math.min(r, g, b)) / 2;\n\t            break;\n\t\n\t        case 'decomposition-min':\n\t            gray = Math.min(r, g, b);\n\t            break;\n\t\n\t        case 'decomposition-max':\n\t            gray = Math.max(r, g, b);\n\t            break;\n\t\n\t        case 'red-chanel':\n\t            gray = r;\n\t            break;\n\t\n\t        case 'green-chanel':\n\t            gray = g;\n\t            break;\n\t\n\t        case 'blue-chanel':\n\t            gray = b;\n\t            break;\n\t    }\n\t\n\t    // Shades of gray\n\t    if (shades !== undefined) {\n\t        gray = parseInt(gray / shades) * shades;\n\t    }\n\t\n\t    // Force integer\n\t    gray = parseInt(gray);\n\t\n\t    // Set new r/g/b values\n\t    data[i] = color(gray);\n\t    data[i + 1] = color(gray);\n\t    data[i + 2] = color(gray);\n\t}\n\t\n\t// Apply filters on provided canvas\n\tfunction canvasFilters(canvas, settings) {\n\t    settings = Object.assign({}, {\n\t        smoothing: false, // Smoothing [true|fale]\n\t        brightness: 0, // Image brightness [-255 to +255]\n\t        contrast: 0, // Image contrast [-255 to +255]\n\t        gamma: 0, // Image gamma correction [0.01 to 7.99]\n\t        grayscale: 'none', // Graysale algorithm [average, luma, luma-601, luma-709, luma-240, desaturation, decomposition-[min|max], [red|green|blue]-chanel]\n\t        shadesOfGray: 256, // Number of shades of gray [2-256]\n\t        invertColor: false, // Invert color...\n\t        dithering: false\n\t    }, settings || {});\n\t\n\t    // Get canvas 2d context\n\t    var context = canvas.getContext('2d');\n\t\n\t    // Smoothing\n\t    if (context.imageSmoothingEnabled !== undefined) {\n\t        context.imageSmoothingEnabled = settings.smoothing;\n\t    } else {\n\t        context.mozImageSmoothingEnabled = settings.smoothing;\n\t        context.webkitImageSmoothingEnabled = settings.smoothing;\n\t        context.msImageSmoothingEnabled = settings.smoothing;\n\t        context.oImageSmoothingEnabled = settings.smoothing;\n\t    }\n\t\n\t    // Get image data\n\t    var imageData = context.getImageData(0, 0, canvas.width, canvas.height);\n\t    var data = imageData.data;\n\t\n\t    var contrastFactor = void 0,\n\t        brightnessOffset = void 0,\n\t        gammaCorrection = void 0,\n\t        shadesOfGrayFactor = void 0;\n\t\n\t    if (settings.contrast !== 0) {\n\t        contrastFactor = 259 * (settings.contrast + 255) / (255 * (259 - settings.contrast));\n\t    }\n\t\n\t    if (settings.brightness !== 0) {\n\t        brightnessOffset = settings.brightness;\n\t    }\n\t\n\t    if (settings.gamma !== 0) {\n\t        gammaCorrection = 1 / settings.gamma;\n\t    }\n\t\n\t    // Shades of gray\n\t    if (settings.shadesOfGray > 1 && settings.shadesOfGray < 256) {\n\t        shadesOfGrayFactor = 255 / (settings.shadesOfGray - 1);\n\t    }\n\t\n\t    // For each pixel\n\t    for (var i = 0, il = data.length; i < il; i += 4) {\n\t        // Apply filters\n\t        invertColor(data, i, settings.invertColor);\n\t        brightness(data, i, brightnessOffset);\n\t        contrast(data, i, contrastFactor);\n\t        gamma(data, i, gammaCorrection);\n\t        grayscale(data, i, settings.grayscale, shadesOfGrayFactor);\n\t    }\n\t\n\t    if (settings.dithering) {\n\t        (0, _floydSteinberg2.default)(imageData);\n\t    }\n\t\n\t    // Write new image data on the context\n\t    context.putImageData(imageData, 0, 0);\n\t}\n\t\n\t// Exports\n\texports.canvasFilters = canvasFilters;\n\texports.default = canvasFilters;\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\t/*\n\t * floyd-steinberg\n\t *\n\t * Using 2D error diffusion formula published by Robert Floyd and Louis Steinberg in 1976\n\t *\n\t * Javascript implementation of Floyd-Steinberg algorithm thanks to Forrest Oliphant @forresto and @meemoo \n\t * via iFramework https://github.com/meemoo/iframework/blob/master/src/nodes/image-monochrome-worker.js\n\t *\n\t * Accepts an object that complies with the HTML5 canvas imageData spec https://developer.mozilla.org/en-US/docs/Web/API/ImageData\n\t * In particular, it makes use of the width, height, and data properties\n\t *\n\t * License: MIT\n\t*/\n\t\n\tmodule.exports = floyd_steinberg;\n\t\n\tfunction floyd_steinberg(image) {\n\t  var imageData = image.data;\n\t  var imageDataLength = imageData.length;\n\t  var w = image.width;\n\t  var lumR = [],\n\t      lumG = [],\n\t      lumB = [];\n\t\n\t  var newPixel, err;\n\t\n\t  for (var i = 0; i < 256; i++) {\n\t    lumR[i] = i * 0.299;\n\t    lumG[i] = i * 0.587;\n\t    lumB[i] = i * 0.110;\n\t  }\n\t\n\t  // Greyscale luminance (sets r pixels to luminance of rgb)\n\t  for (var i = 0; i <= imageDataLength; i += 4) {\n\t    imageData[i] = Math.floor(lumR[imageData[i]] + lumG[imageData[i+1]] + lumB[imageData[i+2]]);\n\t  }\n\t\n\t  for (var currentPixel = 0; currentPixel <= imageDataLength; currentPixel += 4) {\n\t    // threshold for determining current pixel's conversion to a black or white pixel\n\t    newPixel = imageData[currentPixel] < 150 ? 0 : 255;\n\t    err = Math.floor((imageData[currentPixel] - newPixel) / 23);\n\t    imageData[currentPixel] = newPixel;\n\t    imageData[currentPixel + 4         ] += err * 7;\n\t    imageData[currentPixel + 4 * w - 4 ] += err * 3;\n\t    imageData[currentPixel + 4 * w     ] += err * 5;\n\t    imageData[currentPixel + 4 * w + 4 ] += err * 1;\n\t    // Set g and b pixels equal to r (effectively greyscales the image fully)\n\t    imageData[currentPixel + 1] = imageData[currentPixel + 2] = imageData[currentPixel];\n\t  }\n\t\n\t  return image;\n\t}\n\n/***/ }\n/******/ ])\n});\n;\n\n\n// WEBPACK FOOTER //\n// lw.canvas-filters.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 2684c88467508de7b829","import FloydSteinberg from 'floyd-steinberg'\n\n// Grayscale algorithms\nconst grayscaleAlgorithms = [\n    'none',\n    'average',\n    'desaturation',\n    'decomposition-min', 'decomposition-max',\n    'luma', 'luma-601', 'luma-709', 'luma-240',\n    'red-chanel', 'green-chanel', 'blue-chanel'\n]\n\n// Trucate color value in the 0-255 range\nfunction color(color) {\n    return color < 0 ? 0 : (color > 255 ? 255 : color);\n}\n\n// Filters ...\nfunction invertColor(data, i, value) {\n    if (value) {\n        data[i]     = color(255 - data[i])\n        data[i + 1] = color(255 - data[i + 1])\n        data[i + 2] = color(255 - data[i + 2])\n    }\n}\n\nfunction brightness(data, i, value) {\n    if (value !== undefined) {\n        data[i]     = color(data[i]     + value)\n        data[i + 1] = color(data[i + 1] + value)\n        data[i + 2] = color(data[i + 2] + value)\n    }\n}\n\nfunction contrast(data, i, value) {\n    if (value !== undefined) {\n        data[i]     = color(value * (data[i]     - 128) + 128)\n        data[i + 1] = color(value * (data[i + 1] - 128) + 128)\n        data[i + 2] = color(value * (data[i + 2] - 128) + 128)\n    }\n}\n\nfunction gamma(data, i, value) {\n    if (value !== undefined) {\n        data[i]     = color(Math.exp(Math.log(255 * (data[i]     / 255)) * value))\n        data[i + 1] = color(Math.exp(Math.log(255 * (data[i + 1] / 255)) * value))\n        data[i + 2] = color(Math.exp(Math.log(255 * (data[i + 2] / 255)) * value))\n    }\n}\n\nfunction grayscale(data, i, algorithm, shades) {\n    // Graysale\n    // http://www.tannerhelland.com/3643/grayscale-image-algorithm-vb6/\n\n    // Unsupported algorithm\n    if (grayscaleAlgorithms.indexOf(algorithm) === -1) {\n        throw new Error('Unsupported grayscale algorithm: ' + algorithm)\n    }\n\n    // None\n    if (algorithm === 'none') {\n        return null\n    }\n\n    // Get Red/Green/Blue values\n    let gray\n    let r = data[i];\n    let g = data[i + 1];\n    let b = data[i + 2];\n\n    switch (algorithm) {\n        case 'average':\n            gray = (r + g + b) / 3\n            break\n\n        case 'luma': // Default\n            gray = (r * 0.3) + (g * 0.59) + (b * 0.11)\n            break\n\n        case 'luma-601': // CCIR-601\n            gray = (r * 0.299) + (g * 0.587) + (b * 0.114)\n            break\n\n        case 'luma-709': // ITU-R-709\n            gray = (r * 0.2126) + (g * 0.7152) + (b * 0.0722)\n            break\n\n        case 'luma-240': // SMPTE-240M\n            gray = (r * 0.212) + (g * 0.701) + (b * 0.087)\n            break\n\n        case 'desaturation':\n            gray = (Math.max(r, g, b) + Math.min(r, g, b)) / 2\n            break\n\n        case 'decomposition-min':\n            gray = Math.min(r, g, b)\n            break\n\n        case 'decomposition-max':\n            gray = Math.max(r, g, b)\n            break\n\n        case 'red-chanel':\n            gray = r\n            break\n\n        case 'green-chanel':\n            gray = g\n            break\n\n        case 'blue-chanel':\n            gray = b\n            break\n    }\n\n    // Shades of gray\n    if (shades !== undefined) {\n        gray = parseInt(gray / shades) * shades\n    }\n\n    // Force integer\n    gray = parseInt(gray)\n\n    // Set new r/g/b values\n    data[i]     = color(gray)\n    data[i + 1] = color(gray)\n    data[i + 2] = color(gray)\n}\n\n// Apply filters on provided canvas\nfunction canvasFilters(canvas, settings) {\n    settings = Object.assign({}, {\n        smoothing   : false,  // Smoothing [true|fale]\n        brightness  : 0,      // Image brightness [-255 to +255]\n        contrast    : 0,      // Image contrast [-255 to +255]\n        gamma       : 0,      // Image gamma correction [0.01 to 7.99]\n        grayscale   : 'none', // Graysale algorithm [average, luma, luma-601, luma-709, luma-240, desaturation, decomposition-[min|max], [red|green|blue]-chanel]\n        shadesOfGray: 256,    // Number of shades of gray [2-256]\n        invertColor : false,   // Invert color...\n        dithering   : false\n    }, settings || {})\n\n    // Get canvas 2d context\n    let context = canvas.getContext('2d')\n\n    // Smoothing\n    if (context.imageSmoothingEnabled !== undefined) {\n        context.imageSmoothingEnabled = settings.smoothing\n    }\n    else {\n        context.mozImageSmoothingEnabled    = settings.smoothing\n        context.webkitImageSmoothingEnabled = settings.smoothing\n        context.msImageSmoothingEnabled     = settings.smoothing\n        context.oImageSmoothingEnabled      = settings.smoothing\n    }\n\n    // Get image data\n    let imageData = context.getImageData(0, 0, canvas.width, canvas.height)\n    let data      = imageData.data\n\n    let contrastFactor, brightnessOffset, gammaCorrection, shadesOfGrayFactor\n\n    if (settings.contrast !== 0) {\n        contrastFactor = (259 * (settings.contrast + 255)) / (255 * (259 - settings.contrast))\n    }\n\n    if (settings.brightness !== 0) {\n        brightnessOffset = settings.brightness\n    }\n\n    if (settings.gamma !== 0) {\n        gammaCorrection = 1 / settings.gamma\n    }\n\n    // Shades of gray\n    if (settings.shadesOfGray > 1 && settings.shadesOfGray < 256) {\n        shadesOfGrayFactor = 255 / (settings.shadesOfGray - 1)\n    }\n\n    // For each pixel\n    for (let i = 0, il = data.length; i < il; i += 4) {\n        // Apply filters\n        invertColor(data, i, settings.invertColor)\n        brightness(data, i, brightnessOffset)\n        contrast(data, i, contrastFactor)\n        gamma(data, i, gammaCorrection)\n        grayscale(data, i, settings.grayscale, shadesOfGrayFactor)\n    }\n\n    if (settings.dithering) {\n        FloydSteinberg(imageData)\n    }\n\n    // Write new image data on the context\n    context.putImageData(imageData, 0, 0)\n}\n\n// Exports\nexport { canvasFilters }\nexport default canvasFilters\n\n\n\n// WEBPACK FOOTER //\n// ./canvas-filters.js","/*\n * floyd-steinberg\n *\n * Using 2D error diffusion formula published by Robert Floyd and Louis Steinberg in 1976\n *\n * Javascript implementation of Floyd-Steinberg algorithm thanks to Forrest Oliphant @forresto and @meemoo \n * via iFramework https://github.com/meemoo/iframework/blob/master/src/nodes/image-monochrome-worker.js\n *\n * Accepts an object that complies with the HTML5 canvas imageData spec https://developer.mozilla.org/en-US/docs/Web/API/ImageData\n * In particular, it makes use of the width, height, and data properties\n *\n * License: MIT\n*/\n\nmodule.exports = floyd_steinberg;\n\nfunction floyd_steinberg(image) {\n  var imageData = image.data;\n  var imageDataLength = imageData.length;\n  var w = image.width;\n  var lumR = [],\n      lumG = [],\n      lumB = [];\n\n  var newPixel, err;\n\n  for (var i = 0; i < 256; i++) {\n    lumR[i] = i * 0.299;\n    lumG[i] = i * 0.587;\n    lumB[i] = i * 0.110;\n  }\n\n  // Greyscale luminance (sets r pixels to luminance of rgb)\n  for (var i = 0; i <= imageDataLength; i += 4) {\n    imageData[i] = Math.floor(lumR[imageData[i]] + lumG[imageData[i+1]] + lumB[imageData[i+2]]);\n  }\n\n  for (var currentPixel = 0; currentPixel <= imageDataLength; currentPixel += 4) {\n    // threshold for determining current pixel's conversion to a black or white pixel\n    newPixel = imageData[currentPixel] < 150 ? 0 : 255;\n    err = Math.floor((imageData[currentPixel] - newPixel) / 23);\n    imageData[currentPixel] = newPixel;\n    imageData[currentPixel + 4         ] += err * 7;\n    imageData[currentPixel + 4 * w - 4 ] += err * 3;\n    imageData[currentPixel + 4 * w     ] += err * 5;\n    imageData[currentPixel + 4 * w + 4 ] += err * 1;\n    // Set g and b pixels equal to r (effectively greyscales the image fully)\n    imageData[currentPixel + 1] = imageData[currentPixel + 2] = imageData[currentPixel];\n  }\n\n  return image;\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/floyd-steinberg/floyd-steinberg.js\n// module id = 2\n// module chunks = 0"],"sourceRoot":""}